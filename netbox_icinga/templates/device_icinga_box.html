{% load icinga %}

<div class="card">
    <h5 class="card-header">Icinga</h5>
    <div class="card-body">
        <table class="table table-hover attr-table">
            <tr>
                <td>
                    <a href='https://{{ icinga_base_url }}/icingadb/hosts#!/icingadb/host?name={{ object.name }}' target="_blank">
                        <span class="mdi mdi-server-network" aria-hidden="true"></span> Host Status
                    </a>
                </td>
                <td><span class="badge bg-green">{{ icinga.results.0.attrs.last_check_result.state|icinga_status_string }}</span></td>
                <td></td>
            </tr>
            <!-- {{ icinga.results.0.attrs.last_check_result }} -->
            {% for service in status_whitelist %}
            <tr>
                <td><a href='https://{{ icinga_base_url }}extinfo.cgi?type=2&host={{ object.name }}&service={{ service.0 }}' target="_blank">{{ service }}</a></td>
                <td><span class="badge bg-green">{{ icinga.results.0.attrs.last_check_result.|add:service }}</span></td>
            </tr>
            {% endfor %}
            {% for service in icinga.results.0.attrs.last_check_result %}
            <tr>
                <td><a href='https://{{ icinga_base_url }}extinfo.cgi?type=2&host={{ object.name }}&service={{ service.0 }}' target="_blank">{{ service }}</a></td>
                <td>{{ service|icinga_status_string }}</td>
            </tr>
            {% endfor %}
        </table>
    </div>
</div>
